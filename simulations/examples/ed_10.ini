[General]
network = flora.simulations.LoRaNetworkTest
**.maxTransmissionDuration = 1000s
**.energyDetection = -110dBm

#cmdenv-autoflush = true
#cmdenv-status-frequency = 10000000s
#cmdenv-express-mode = false
#cmdenv-output-file = cmd_env_log.txt
**.vector-recording = true

rng-class = "cMersenneTwister"

#gateway features
**.numberOfGateways = 2
# gateway common feautres
**.loRaGW[*].numUdpApps = 1
**.loRaGW[*].packetForwarder.localPort = 2000
**.loRaGW[*].packetForwarder.destPort = 1000
**.loRaGW[*].packetForwarder.destAddresses = "networkServer"
**.loRaGW[*].packetForwarder.indexNumber = 0
**.LoRaGWNic.radio.iAmGateway = true
**.loRaGW[*].**.initFromDisplayString = false
**.loRaGW[1].packetForwarder.edgeFrameToAggregate = 2

# per gw features
**.loRaGW[0].**.initialX = 425.00m
**.loRaGW[0].**.initialY = 500.00m
**.loRaGW[0].packetForwarder.gwProtocolType = "legacy"
**.loRaGW[1].**.initialX = 475.00m
**.loRaGW[1].**.initialY = 500.00m
**.loRaGW[1].packetForwarder.gwProtocolType = "edge"

# Network Server
**.networkServer.numApps = 1
**.networkServer.**.evaluateADRinServer = true
**.networkServer.app[0].typename = "NetworkServerApp"
**.networkServer.app[0].destAddresses = "loRaGW[0]"
**.networkServer.app[0].destPort = 2000
**.networkServer.app[0].localPort = 1000
**.networkServer.app[0].adrMethod = ${"avg"}

**.numberOfPacketsToSend = 1000 #${numberOfPAckets = 200..5000 step 200} #100 #obviously 0 means infinite number of packets
#sim-time-limit = 1d
simtime-resolution = -11
repeat = 30

**.timeToFirstPacket = exponential(1000s)
**.timeToNextPacket = exponential(1000s)
**.alohaChannelModel = false


#power consumption features
**.loRaNodes[*].LoRaNic.radio.energyConsumer.typename = "LoRaEnergyConsumer"
**.loRaNodes[*].**.energySourceModule = "^.IdealEpEnergyStorage"
**.loRaNodes[*].LoRaNic.radio.energyConsumer.configFile = xmldoc("../energyConsumptionParameters.xml")

#general features
**.sigma = 3.57
**.constraintAreaMinX = 0m
**.constraintAreaMinY = 0m
**.constraintAreaMinZ = 0m
**.constraintAreaMaxZ = 0m

LoRaNetworkTest.**.radio.separateTransmissionParts = false
LoRaNetworkTest.**.radio.separateReceptionParts = false


**.ipv4Delayer.config = xmldoc("../cloudDelays.xml")
**.radio.radioMediumModule = "LoRaMedium"
**.LoRaMedium.pathLossType = "LoRaLogNormalShadowing"
**.minInterferenceTime = 0s
**.displayAddresses = false

# cache features
**.LoRaMedium.mediumLimitCacheType = "LoRaMediumCache"
**.LoRaMedium.rangeFilter = "communicationRange"
**.LoRaMedium.neighborCacheType = "LoRaNeighborCache"
**.LoRaMedium.neighborCache.range = 546m
**.LoRaMedium.neighborCache.refillPeriod = 3000s


output-scalar-file = ../results/edge-test-ed-10-s${runnumber}.sca
output-vector-file = ../results/edge-test-ed-10-s${runnumber}.vec

#### Nodes features
**.numberOfNodes = 10
**.constraintAreaMaxX = 1000m
**.constraintAreaMaxY = 1000m

# Common features
**.loRaNodes[*].**.initFromDisplayString = false
**.loRaNodes[*].**.evaluateADRinNode = true
# **.loRaNodes[*].**initialLoRaBW = 125 kHz
# **.loRaNodes[*].**initialLoRaCR = 4
**.loRaNodes[*].numApps = 1
**.loRaNodes[*].app[0].typename = "SimpleLoRaApp"

# Nodes position
**.loRaNodes[0].**.initialX = 656.75m
**.loRaNodes[0].**.initialY = 515.93m
**.loRaNodes[1].**.initialX = 289.82m
**.loRaNodes[1].**.initialY = 362.58m
**.loRaNodes[2].**.initialX = 444.29m
**.loRaNodes[2].**.initialY = 563.75m
**.loRaNodes[3].**.initialX = 602.66m
**.loRaNodes[3].**.initialY = 478.45m
**.loRaNodes[4].**.initialX = 470.31m
**.loRaNodes[4].**.initialY = 320.77m
**.loRaNodes[5].**.initialX = 405.43m
**.loRaNodes[5].**.initialY = 434.16m
**.loRaNodes[6].**.initialX = 622.07m
**.loRaNodes[6].**.initialY = 427.74m
**.loRaNodes[7].**.initialX = 607.24m
**.loRaNodes[7].**.initialY = 646.21m
**.loRaNodes[8].**.initialX = 345.10m
**.loRaNodes[8].**.initialY = 512.81m
**.loRaNodes[9].**.initialX = 482.55m
**.loRaNodes[9].**.initialY = 675.88m

# Nodes initial SF-TP
**.loRaNodes[0].**initialLoRaSF = 10
**.loRaNodes[0].**initialLoRaTP = 14dBm
**.loRaNodes[1].**initialLoRaSF = 12
**.loRaNodes[1].**initialLoRaTP = 14dBm
**.loRaNodes[2].**initialLoRaSF = 9
**.loRaNodes[2].**initialLoRaTP = 14dBm
**.loRaNodes[3].**initialLoRaSF = 8
**.loRaNodes[3].**initialLoRaTP = 14dBm
**.loRaNodes[4].**initialLoRaSF = 11
**.loRaNodes[4].**initialLoRaTP = 14dBm
**.loRaNodes[5].**initialLoRaSF = 7
**.loRaNodes[5].**initialLoRaTP = 11dBm
**.loRaNodes[6].**initialLoRaSF = 12
**.loRaNodes[6].**initialLoRaTP = 14dBm
**.loRaNodes[7].**initialLoRaSF = 9
**.loRaNodes[7].**initialLoRaTP = 14dBm
**.loRaNodes[8].**initialLoRaSF = 10
**.loRaNodes[8].**initialLoRaTP = 14dBm
**.loRaNodes[9].**initialLoRaSF = 11
**.loRaNodes[9].**initialLoRaTP = 14dBm